扩展运算符(...)是ES6的语法，用于取出参数对象的所有可遍历属性，然后拷贝到当前对象之中。

展开运算符（spread operator）允许一个表达式在某处展开。展开运算符在多个参数（用于函数调用）或多个元素（用于数组字面量）或者多个变量（用于解构赋值）的地方可以使用。

展开运算符不能用在对象当中，因为目前展开运算符只能在可遍历对象（iterables）可用。iterables的实现是依靠[Symbol.iterator]函数，而目前只有Array,Set,String内置[Symbol.iterator]方法，而Object尚未内置该方法，因此无法使用展开运算符。不过ES7草案当中已经加入了对象展开运算符特性。

#### 基本用法

```js
let person = {name: "Amy", age: 15}
let someone = { ...person }
someone  // {name: "Amy", age: 15}
```

#### 特殊用法

##### 数组

由于数组是特殊的对象，所以对象的扩展运算符也可以用于数组。

```js
let foo = { ...['a', 'b', 'c'] };
foo
// {0: "a", 1: "b", 2: "c"}
```

##### 空对象

如果扩展运算符后面是一个空对象，则没有任何效果。

```js
let a = {...{}, a: 1}
a // { a: 1 }
```

##### Int类型、Boolen类型、undefined、null

如果扩展运算符后面是上面这几种类型，都会返回一个空对象，因为它们没有自身属性。

```js
// 等同于 {...Object(1)}
{...1} // {}

// 等同于 {...Object(true)}
{...true} // {}

// 等同于 {...Object(undefined)}
{...undefined} // {}

// 等同于 {...Object(null)}
{...null} // {} 
```

##### 字符串

如果扩展运算符后面是字符串，它会自动转成一个类似数组的对象

```js
{...'hello'}
// {0: "h", 1: "e", 2: "l", 3: "l", 4: "o"}
```

#### 对象的合并

```js
let age = {age: 15}
let name = {name: "Amy"}
let person = {...age, ...name}
person; // {age: 15, name: "Amy"}
```

#### 注意事项

自定义的属性和拓展运算符对象里面属性的相同的时候：

##### 自定义的属性在拓展运算符后面，则拓展运算符对象内部同名的属性将被覆盖掉。

```js
let person = {name: "Amy", age: 15};
let someone = { ...person, name: "Mike", age: 17};
someone;  //{name: "Mike", age: 17}
```

##### 自定义的属性在拓展运算度前面，则变成设置新对象默认属性值。

```js
let person = {name: "Amy", age: 15};
let someone = {name: "Mike", age: 17, ...person};
someone;  //{name: "Amy", age: 15}
```

##### 自定义的属性在拓展运算度前面，且该属性是拓展预算符后对象里的，则会取出该对象的值，拓展预算符则会取出剩下的属性。

```js
let person = {name: "Amy", age: 15};
let someone = {name, ...person};
someone;  //{name: "Amy", age: 15}
```

## 函数调用中使用展开运算符

在以前我们会使用apply方法来将一个数组展开成多个参数：

```javascript
function test(a, b, c) { }
var args = [0, 1, 2];
test.apply(null, args);
```

如上，我们把args数组当作实参传递给了a,b,c，这边正是利用了Function.prototype.apply的特性。

不过有了ES6，我们就可以更加简洁地来传递数组参数：

```bash
function test(a,b,c) { }
var args = [0,1,2];
test(...args);
```

我们使用...展开运算符就可以把args直接传递给test()函数。

## 数组字面量中使用展开运算符

在ES6的世界中，我们可以直接将一个数组直接合并到另外一个数组当中：

```perl
var arr1=['a','b','c'];
var arr2=[...arr1,'d','e']; //['a','b','c','d','e']
```

展开运算符也可以用在push函数中，可以不用再用apply()函数来合并两个数组：

```perl
var arr1=['a','b','c'];
var arr2=['d','e'];
arr1.push(...arr2); //['a','b','c','d','e']
```

## 用于解构赋值

解构赋值也是ES6中的一个特性，而这个展开运算符可以用于部分情景：

```csharp
let [arg1,arg2,...arg3] = [1, 2, 3, 4];
arg1 //1
arg2 //2
arg3 //['3','4']
```

展开运算符在解构赋值中的作用跟之前的作用看上去是相反的，将多个数组项组合成了一个新数组。

不过要注意，解构赋值中展开运算符只能用在最后：

```csharp
let [arg1,...arg2,arg3] = [1, 2, 3, 4]; //报错
```

## 类数组对象变成数组

展开运算符可以将一个类数组对象变成一个真正的数组对象：

```javascript
var list=document.getElementsByTagName('div');
var arr=[..list];
```

list是类数组对象，而我们通过使用展开运算符使之变成了数组。

## ES7草案中的对象展开运算符

ES7中的对象展开运算符符可以让我们更快捷地操作对象：

```csharp
let {x,y,...z}={x:1,y:2,a:3,b:4};
x; //1
y; //2
z; //{a:3,b:4}
```

如上，我们可以将一个对象当中的对象的一部分取出来成为一个新对象赋值给展开运算符的参数。

同时，我们也可以像数组插入那样将一个对象插入另外一个对象当中：

```csharp
let z={a:3,b:4};
let n={x:1,y:2,...z};
n; //{x:1,y:2,a:3,b:4}
```

另外还要很多用处，比如可以合并两个对象：

```csharp
let a={x:1,y:2};
let b={z:3};
let ab={...a,...b};
ab //{x:1,y:2,z:3}
```