## 问答题

1. 什么是表？有哪些元素组成？

   > 在数据库中，表是用于组织和存储数据的基本结构。
   >
   > 表的主要元素包括：
   >
   > 1. 表名：用于唯一标识表的名称，通常具有描述性的名称，以便理解表的用途。
   > 2. 列（字段）：表中的每个列定义了特定类型的数据。它们具有列名和数据类型，用于描述存储在该列中的数据的特征。
   > 3. 行（记录）：每一行代表表中的一个实例或记录，包含一组对应于列的具体数据值。
   > 4. 主键：主键是唯一标识表中每个记录的列或列组合。它用于确保每个记录都具有唯一的标识，并用于在表中进行记录的唯一引用。
   > 5. 外键：外键是表中的一个列，它与另一个表的主键形成关联。它用于建立表之间的关联关系，以实现数据的引用和一致性。
   > 6. 索引：索引是表中的一种数据结构，用于提高数据检索的速度。通过在一个或多个列上创建索引，可以加快查找特定值或满足特定条件的记录的速度。
   > 7. 约束：约束是用于强制实施表中数据的完整性和规范性的规则。常见的约束包括主键约束、唯一约束、非空约束和外键约束。
   >

2. 关系运算有哪些？对应的SQL语句是什么？效果如何？

   > 1. 选择 (Selection)：根据给定的条件从表中选择满足条件的行。
   >    SQL 语句：SELECT * FROM table_name WHERE condition;
   >    效果：返回满足条件的行。
   >
   > 2. 投影 (Projection)：从表中选择指定的列。
   >    SQL 语句：SELECT column1, column2 FROM table_name;
   >    效果：返回指定的列。
   >
   > 3. 连接 (Join)：将两个或多个表中的行根据共享的列值进行合并。
   >    SQL 语句：SELECT * FROM table1 INNER JOIN table2 ON table1.column = table2.column;
   >    效果：返回满足连接条件的行的组合。
   >
   > 4. 并集 (Union)：将两个或多个表中的行组合成一个结果集，去除重复的行。
   >    SQL 语句：SELECT * FROM table1 UNION SELECT * FROM table2;
   >    效果：返回两个表中的所有行，并去除重复的行。
   >
   > 5. 交集 (Intersection)：返回两个表中共同存在的行。
   >    SQL 语句：SELECT * FROM table1 INTERSECT SELECT * FROM table2;
   >    效果：返回两个表中共同存在的行。
   >
   > 6. 差集 (Difference)：返回存在于一个表中但不存在于另一个表中的行。
   >    SQL 语句：SELECT * FROM table1 EXCEPT SELECT * FROM table2;
   >    效果：返回存在于 table1 中但不存在于 table2 中的行。
   >
   > 7. 分裂 (Division)：根据一个表中的值，筛选出另一个表中与之对应的值。
   >    SQL 语句：SELECT * FROM table1 WHERE column IN (SELECT column FROM table2);
   >    效果：返回 table2 中与 table1 中的值对应的行。
   >

3. 什么是主键？有哪些约束？

   > 主键是用于唯一标识关系型数据库表中每一行记录的列或列组合，用于标识和引用表中的每个记录，快速查找和关联其他表的数据。具有以下特点：
   >
   > 1. 唯一性：主键的值在整个表中必须是唯一的，每个记录都必须具有唯一的主键值。
   > 2. 非空性：主键的值不能为空，即每个记录都必须有一个非空的主键值。
   > 3. 稳定性：主键的值在记录插入后不能更改，以确保唯一性和数据的稳定性。
   >
   > 在关系型数据库中，还有其他一些常见的约束用于确保数据的完整性和一致性，包括：
   >
   > 1. 唯一约束 (Unique Constraint)：用于确保列或列组合的值在表中是唯一的，不允许重复。
   > 2. 非空约束 (Not Null Constraint)：用于确保列的值不为空，即不允许插入空值。
   > 3. 外键约束 (Foreign Key Constraint)：用于建立表之间的关联关系，确保一个表中的列值与另一个表的主键值匹配。
   > 4. 默认约束 (Default Constraint)：用于指定列的默认值，如果插入记录时未提供该列的值，则将使用默认值。
   > 5. 检查约束 (Check Constraint)：用于定义列值必须满足的条件，只允许满足条件的值插入到列中。
   >

4. 什么是外键？能起到什么作用？

   > 外键（Foreign Key）是关系型数据库中用于建立表之间关联关系的一种约束。外键定义了一个表中的列或列组合，该列或列组合的值必须与另一个表中的主键或唯一键的值相匹配。
   >
   > 外键的作用有建立关联关系、维护数据一致性和引用完整性的作用，使数据之间的关系更加清晰、可靠：
   >
   > 1. 建立关联关系：外键用于在两个表之间建立关联关系，将数据连接起来。通过外键，可以跨表查询、获取相关联的数据。
   >
   > 2. 维护数据一致性：外键可以确保数据的一致性。当一个表中的外键与另一个表的主键关联时，插入、更新或删除操作会受到限制，以保持数据的完整性。
   >
   > 3. 数据引用完整性：外键可以确保数据的引用完整性。通过外键约束，可以防止在关联表中引用不存在的数据，保证数据的有效性。
   >
   > 4. 数据级联操作：外键还可以实现级联操作。当主表中的记录发生变化时，外键约束可以自动更新或删除关联表中的相关数据，以保持数据的一致性和完整性。
   >

5. 什么是索引？加入索引后，CRUD性能各是如何变化？

   > 索引是数据库中用于提高数据检索速度的数据结构。类似于书籍的目录，可以帮助数据库引擎快速定位到包含所需数据的页面或行，从而加快数据的访问速度。
   >
   > 加入索引后，CRUD（创建、读取、更新、删除）操作的性能会有以下变化：
   >
   > 1. 读取（查询）操作：加入适当的索引可以显著提高读取操作的性能。索引可以减少需要扫描的数据量，从而加快查询的执行速度。当查询条件与索引列匹配时，数据库引擎可以使用索引直接定位到符合条件的数据，而不需要全表扫描。
   >
   > 2. 创建操作：创建操作包括插入新记录或创建新表。在创建操作中，索引可能会稍微降低性能，因为每次插入新记录时，数据库需要更新索引。因此，在进行大批量的数据插入时，可以考虑暂时禁用索引，然后再重新启用。
   >
   > 3. 更新操作：更新操作包括修改现有记录的值。更新操作对索引的影响取决于更新的列是否包含在索引中。如果更新的列包含在索引中，那么更新操作可能会导致索引的更新，从而略微降低性能。但是，索引可以帮助快速定位到需要更新的记录，减少扫描的数据量。
   >
   > 4. 删除操作：删除操作包括删除记录或删除表。与创建操作类似，删除操作可能会稍微降低性能，因为数据库需要更新索引。在删除大量数据时，可以考虑暂时禁用索引，然后再重新启用。
   >

6. 数据库设计中的第一范式(1NF)，第二范式(2NF)，第三范式(3NF)，第四范式(4NF)各是什么意思？请给每个范式一个demo

   > 数据库设计中的**范式是用来规范化数据模型的一组规则，以确保数据的一致性和减少数据冗余**。下面是每个范式的解释和一个简单的示例：
   >
   > 1. 第一范式 (1NF)：
   > 第一范式要求每个数据表中的每个列都是原子的，不可再分的最小单元。也就是说，每个列中的数据不能是多个值的集合，表中不能含表。
   > 示例：
   > 一个存储学生信息的表格，如果我们将学生的课程成绩以逗号分隔的形式存储在一个列中，这就违反了第一范式。正确的做法是将每个成绩存储在单独的行中。
   >
   > 2. 第二范式 (2NF)：
   > 第二范式，满足第一范式后，要求数据表中的每个非主键列完全依赖于主键，而不是部分依赖于主键。
   > 示例：
   > 一个订单表格，其中包含订单号、产品号和产品价格。如果产品价格只依赖于产品号，而不依赖于订单号，那么就违反了第二范式。正确的做法是将产品价格从订单表中分离出来，创建一个独立的产品表格。
   >
   > 3. 第三范式 (3NF)：
   > 第三范式，满足第二范式后，要求数据表中的每一列只与主键直接相关而不是间接相关，（表中的每一列只能依赖于主键）
   > 示例：
   > 一个学生课程表格，其中包含学生姓名、课程名称和教师姓名。如果教师姓名依赖于课程名称，而不是直接依赖于学生姓名，那么就违反了第三范式。正确的做法是将教师姓名从学生课程表格中分离出来，创建一个独立的教师表格。
   >
   > 4. 第四范式 (4NF)：
   > 第四范式要求数据表中的多值依赖关系被消除。多值依赖是指当一个表中的某些列的值依赖于其他列的组合时。
   > 示例：
   > 一个订单表格，其中包含订单号、产品号和产品颜色。如果产品颜色依赖于产品号，而不是直接依赖于订单号，那么就存在多值依赖。正确的做法是将产品颜色从订单表中分离出来，创建一个独立的产品表格，并建立适当的关联。
   >

7. 请说明笛卡尔积和join操作的关系

   > - 笛卡尔积（Cartesian Product）：笛卡尔积是指在没有任何条件约束的情况下，将两个表的所有行进行组合，生成一个新的表。结果表的行数等于两个表的行数的乘积m*n。每一行都包含了两个表的所有列的组合。
   >
   > - JOIN 操作：JOIN 操作是通过基于共享列的条件将两个或多个表连接起来，生成一个包含了连接结果的新表。JOIN 操作的目的是根据共享列的值将相关的数据行组合在一起，以便进行更有意义的查询和分析。JOIN 操作可以根据连接条件的不同，分为 INNER JOIN、LEFT JOIN、RIGHT JOIN 和 FULL JOIN 等不同的类型。
   >
   > JOIN 操作可以看作是在笛卡尔积的基础上进行了条件过滤，只选择满足连接条件的行进行组合。通过 JOIN 操作，可以根据表之间的关联关系，将相关的数据行连接在一起，实现更复杂的查询和数据分析需求。
   >
   > 

## 代码题

### Student (学生表)

|  属性名   | 数据类型 | 可否为空 |     含义     |
| :-------: | :------: | :------: | :----------: |
|    Sno    |   Int    |    否    | 学号（主键） |
|   Sname   | Char(8)  |    否    |   学生姓名   |
|   Ssex    | Char(2)  |    否    |   学生性别   |
| Sbirthday | datetime |    可    | 学生出生年月 |
|   Class   | Char(5)  |    可    | 学生所在班级 |

| Sno  | Sname | Ssex | Sbirthday  | class |
| :--: | :---: | :--: | :--------: | :---: |
| 108  | 曾华  |  男  | 1977-09-01 | 95033 |
| 105  | 匡明  |  男  | 1975-10-02 | 95031 |
| 107  | 王丽  |  女  | 1976-01-23 | 95033 |
| 101  | 李军  |  男  | 1976-02-20 | 95033 |
| 109  | 王芳  |  女  | 1975-02-10 | 95031 |
| 103  | 陆君  |  男  | 1974-06-03 | 95031 |

### Course（课程表）

| 属性名 |  数据类型   | 可否为空 |       含义       |
| :----: | :---------: | :------: | :--------------: |
|  Cno   |     Int     |    否    |  课程号（主键）  |
| Cname  | Varchar(10) |    否    |     课程名称     |
|  Tno   |     Int     |    否    | 教工编号（外键） |

| Cno  |   Cname    | Tno  |
| :--: | :--------: | :--: |
| 105  | 计算机导论 | 825  |
| 245  |  操作系统  | 804  |
| 166  |  数字电路  | 856  |
| 888  |  高等数学  | 831  |

### Score(成绩表)

| 属性名 |   数据类型   | 可否为空 |      含义      |
| :----: | :----------: | :------: | :------------: |
|  Sno   |     Int      |    否    |  学号（外键）  |
|  Cno   |     Int      |    否    | 课程号（外键） |
| Degree | Decimal(4,1) |    可    |      成绩      |

| Sno  | Cno  | Degree |
| :--: | :--: | :----: |
| 103  | 245  |   86   |
| 105  | 245  |   75   |
| 109  | 245  |   68   |
| 103  | 105  |   92   |
| 105  | 105  |   88   |
| 101  | 105  |   64   |
| 107  | 105  |   91   |
| 108  | 105  |   78   |
| 101  | 166  |   85   |
| 107  | 166  |   79   |
| 108  | 166  |   81   |

### Teacher(教师表)

|  属性名   |  数据类型   | 可否为空 |       含义       |
| :-------: | :---------: | :------: | :--------------: |
|    Tno    |     Int     |    否    | 教工编号（主键） |
|   Tname   |   Char(4)   |    否    |     教工姓名     |
|   Tsex    |   Char(2)   |    否    |     教工性别     |
| Tbirthday |  datetime   |    可    |   教工出生年月   |
|   Prof    |   Char(6)   |    可    |       职称       |
|  Depart   | Varchar(10) |    否    |   教工所在部门   |

| Tno  | Tname | Tsex | Tbirthday  |  Prof  |   Depart   |
| :--: | :---: | :--: | :--------: | :----: | :--------: |
| 804  | 李诚  |  男  | 1958-12-02 | 副教授 |  计算机系  |
| 856  | 张旭  |  男  | 1969-03-12 |  讲师  | 电子工程系 |
| 825  | 王萍  |  女  | 1972-05-05 |  助教  |  计算机系  |
| 831  | 刘冰  |  女  | 1977-08-14 |  助教  | 电子工程系 |

请创建以上的表结构，并插入数据，而后完成如下代码题，请提交SQL语句和SQL语句运行结果截图

1. 请查询所有男学生

   > <img src="C:\Users\86153\AppData\Roaming\Typora\typora-user-images\image-20231202173503038.png" alt="image-20231202173503038" style="zoom:80%;" />

2. 请查询所有课程和对应课程的老师（使用join）

   > <img src="C:\Users\86153\AppData\Roaming\Typora\typora-user-images\image-20231202183933414.png" alt="image-20231202183933414" style="zoom:80%;" />

3. 请查询`95033`班中学习成绩最好的学生（课程平均分最高的学生）

   > <img src="C:\Users\86153\AppData\Roaming\Typora\typora-user-images\image-20231202193535613.png" alt="image-20231202193535613" style="zoom:80%;" />

4. 请查询所有得分80分以上的学生姓名和所修课程

   > <img src="C:\Users\86153\AppData\Roaming\Typora\typora-user-images\image-20231202194026911.png" alt="image-20231202194026911" style="zoom:80%;" />

5. 请查询所有学生中得分80分以上的课程最多的学生

   > <img src="C:\Users\86153\AppData\Roaming\Typora\typora-user-images\image-20231202195240128.png" alt="image-20231202195240128" style="zoom:80%;" />

6. 请查询所有助教教授的课程中，学生平均分最高的课程

   > <img src="C:\Users\86153\AppData\Roaming\Typora\typora-user-images\image-20231202210343373.png" alt="image-20231202210343373" style="zoom:80%;" />









## 算法题

1. [[39\]Combination Sum](https://leetcode.com/problems/combination-sum)

   **组合和**

   给出一个候选集合(`C`，无重复)和一个目标数`T`，请寻找候选集合`C`内元素的组合使得这些选择之和等于`T`。

   `C`中同一个元素可以**多次**使用。

   注意：

   - 所有的数（包括目标数）都是正整数
   - 解集中不能有重复的组合

   如给出的集合为`[2, 3, 6, 7]`，目标数为`7`

   解集为（你应该返回）：

   ```
   [
      [7],
      [2, 2, 3]
   ]
   ```

2. [[40\]Combination Sum II](https://leetcode.com/problems/combination-sum-ii)

   **组合和2**

   给出一个候选集合(`C`，无重复)和一个目标数`T`，请寻找候选集合`C`内元素的组合使得这些选择之和等于`T`。

   `C`中同一个元素只可以**一次**。

   注意：

   - 所有的数（包括目标数）都是正整数
   - 解集中不能有重复的组合

   如给出的集合为`[2, 3, 6, 7]`，目标数为`7`

   解集为（你应该返回）：

   ```
   [
      [7],
      [2, 2, 3]
   ]
   ```

   